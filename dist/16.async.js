(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{dZYy:function(e,t,a){"use strict";var r=a("mZ4U"),n=a("fbTi");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("zAuD")),s=r(a("43Yg")),d=r(a("/tCh")),u=r(a("scpF")),o=r(a("O/V9")),i=r(a("8aBX"));a("pLlE");var c=r(a("qQZ1"));a("3nLr");var f=r(a("CWUu"));a("5KzM");var p=r(a("FCwu"));a("DCdT");var m,h,v=r(a("oyxa")),y=n(a("ZZRV")),g=a("LneV");function _(e){return function(){var t,a=(0,o.default)(e);if(E()){var r=(0,o.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,u.default)(this,t)}}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}v.default.TreeNode;var b=p.default.Item,S=(f.default.Group,c.default.Option,v.default.SHOW_PARENT,m=(0,g.connect)(function(e){var t=e.roles;return{roles:t}}),m(h=function(e){(0,i.default)(a,e);var t=_(a);function a(e){var r;return(0,s.default)(this,a),r=t.call(this,e),r.state={showCustom:!1},r}return(0,d.default)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:17}}},t=this.props.form.getFieldDecorator;return y.default.createElement("div",null,y.default.createElement(p.default,{onSubmit:this.handleSubmit},y.default.createElement(b,(0,l.default)({},e,{label:y.default.createElement("span",null,"\u7ed1\u5b9a\u72b6\u6001")}),t("bind_status",{rules:[{required:!0}]})(y.default.createElement(f.default.Group,null,y.default.createElement(f.default,{value:"2"},"\u5ba1\u6838\u901a\u8fc7"),y.default.createElement(f.default,{value:"-2"},"\u5ba1\u6838\u4e0d\u901a\u8fc7"),y.default.createElement(f.default,{value:"-1"},"\u89e3\u9664\u7ed1\u5b9a"))))))}}]),a}(y.Component))||h),w=p.default.create()(S),R=(0,g.connect)()(w);t.default=R},q6jL:function(e,t,a){"use strict";var r=a("mZ4U"),n=a("fbTi");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("tIwr");var l=r(a("IX2G"));a("Jkyn");var s=r(a("DwzN"));a("Ihhu");var d=r(a("3EM/"));a("UOoy");var u=r(a("nPKv"));a("s7Wz");var o=r(a("mLsM"));a("77AG");var i=r(a("czPo"));a("EtnJ");var c=r(a("FpxK"));a("CuyC");var f=r(a("PdMq"));a("NRzj");var p=r(a("EDbO")),m=r(a("mK77")),h=r(a("43Yg")),v=r(a("/tCh")),y=r(a("Tfcp")),g=r(a("scpF")),_=r(a("O/V9")),E=r(a("8aBX"));a("DvNH");var b=r(a("SzGI"));a("pLlE");var S=r(a("qQZ1"));a("3nLr");var w=r(a("CWUu"));a("5KzM");var R,k,C,M,x=r(a("FCwu")),D=n(a("ZZRV")),z=(a("EaaV"),r(a("a/LZ")),a("LneV")),A=r(a("ybbW")),F=r(a("dZYy")),O=r(a("eKz+")),V=r(a("voBT"));function I(e){return function(){var t,a=(0,_.default)(e);if(B()){var r=(0,_.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,g.default)(this,t)}}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var L=x.default.Item,U=(w.default.Button,w.default.Group,S.default.Option,b.default.Search,b.default.TextArea,R=(0,z.connect)(function(e){var t=e.user_manage,a=e.loading;return{user_manage:t,loading:a.models.user_manage}}),k=x.default.create(),R(C=k((M=function(e){(0,E.default)(a,e);var t=I(a);function a(e){var r;return(0,h.default)(this,a),r=t.call(this,e),r.formLayout={labelCol:{span:7},wrapperCol:{span:13}},r.resize=function(){r.setState({tableY:document.querySelector(".table-page").offsetHeight-153})},r.showModal=function(){r.setState({current:void 0,visible:!0})},r.showEditModal=function(e){r.setState({visible:!0,current:e})},r.handleDone=function(){setTimeout(function(){return r.addBtn.blur()},0),r.setState({done:!1,visible:!1},function(){this.handleSearch({page:this.state.page,per_page:this.state.per_page,username:this.state.username})})},r.handleCancel=function(){setTimeout(function(){return r.addBtn.blur()},0),r.setState({visible:!1})},r.handleSearch=function(e,t){console.log("handleSearch",e);var a=(0,y.default)(r),n=r.props.dispatch;n({type:"user_manage/fetch",payload:(0,m.default)({},e),callback:function(){console.log("handleSearch callback"),a.setState((0,m.default)({},e)),t&&t()}})},r.handleDelete=function(e){var t=(0,y.default)(r),a=r.props.dispatch;a({type:"user_manage/remove",payload:{id:e},callback:function(){p.default.success("\u5220\u9664\u7528\u6237\u6210\u529f"),t.handleSearch({page:t.state.page,per_page:t.state.per_page,username:t.state.username})}})},r.handleAdd=function(){var e=r.AddUser.props.form.getFieldsValue();console.log("formValues",e);var t=(0,y.default)(r);r.props.dispatch({type:"user_manage/add",payload:(0,m.default)({},e,{role_id:e.role_id?e.role_id.key:""}),callback:function(){p.default.success("\u65b0\u5efa\u7528\u6237\u6210\u529f"),t.setState({addModal:!1}),t.handleSearch({page:t.state.page,per_page:t.state.per_page,username:t.state.username})}})},r.handleEdit=function(){var e=r.EditUser.props.form.getFieldsValue();console.log("formValues",e);var t=(0,y.default)(r);r.props.dispatch({type:"user_manage/edit",payload:(0,m.default)({},e,{id:r.state.editRecord.id,role_id:e.role_id?e.role_id.key:""}),callback:function(){p.default.success("\u4fee\u6539\u7528\u6237\u6210\u529f"),t.setState({editModal:!1}),t.handleSearch({page:t.state.page,per_page:t.state.per_page,username:t.state.username})}})},r.handleFormReset=function(){var e=r.props.form;e.resetFields(),r.handleSearch({page:1,username:"",per_page:30})},r.handleEditStatus=function(e,t){console.log(e,t);var a=0;a=1===t?-1:1;var n=(0,y.default)(r);r.props.dispatch({type:"user_manage/editStatus",payload:{data:{id:e,status:a}},callback:function(){p.default.success("\u64cd\u4f5c\u6210\u529f"),n.handleSearch({page:n.state.page,username:n.state.username,per_page:n.state.per_page})}})},r.handleEditApply=function(){var e=r.EditApplyUser.props.form.getFieldsValue();console.log("formValues",e);var t=(0,y.default)(r);r.props.dispatch({type:"user_manage/editApply",payload:(0,m.default)({},e,{id:r.state.editRecord.id}),callback:function(){p.default.success("\u4fee\u6539\u6210\u529f"),t.setState({applyModal:!1}),t.handleSearch({page:t.state.page,per_page:t.state.per_page,username:t.state.username})}})},r.handleMenuClick=function(e,t){var a=r.props.dispatch,n=(0,y.default)(r);switch(e.key){case"delete":a({type:"user_manage/remove",payload:{id:t.id},callback:function(){p.default.success("\u5220\u9664\u6210\u529f"),n.handleSearch({page:n.state.page,username:n.state.username,per_page:n.state.per_page})}});break;case"reset":a({type:"user_manage/resetPassword",payload:{id:t.id},callback:function(){p.default.success("\u64cd\u4f5c\u6210\u529f"),n.handleSearch({page:n.state.page,username:n.state.username,per_page:n.state.per_page})}});break;default:break}},r.permissions=JSON.parse(sessionStorage.getItem("permissions")),r.state={showAddBtn:(0,V.default)(r.permissions,{name:"user_add_and_edit"}),showdelBtn:(0,V.default)(r.permissions,{name:"user_delete"}),showPasswordBtn:(0,V.default)(r.permissions,{name:"user_default_password_edit"}),user_password_reset:(0,V.default)(r.permissions,{name:"user_password_reset"}),visible:!1,done:!1,page:1,per_page:30,username:"",editRecord:{}},r}return(0,v.default)(a,[{key:"componentDidMount",value:function(){this.setState({tableY:document.querySelector(".table-page").offsetHeight-153});var e=this.props.dispatch;e({type:"user_manage/fetch",payload:{page:1,per_page:30,username:""}}),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){console.log("componentWillUnmount"),window.removeEventListener("resize",this.resize)}},{key:"renderSimpleForm",value:function(){var e=this,t=this.props.form.getFieldDecorator;return D.default.createElement(x.default,{layout:"inline",className:"search-form"},D.default.createElement(L,{label:"\u7528\u6237\u540d"},t("username")(D.default.createElement(b.default,{placeholder:"\u8bf7\u8f93\u5165"}))),D.default.createElement(L,null,D.default.createElement(f.default,{type:"primary",icon:"search",onClick:function(){var t=e.props.form;t.validateFields(function(t,a){if(!t){var r=(0,m.default)({},a);e.handleSearch({page:1,per_page:e.state.per_page,username:r.username?r.username:""})}})}},"\u67e5\u8be2"),D.default.createElement(f.default,{style:{marginLeft:8},icon:"redo",onClick:this.handleFormReset},"\u91cd\u7f6e"),this.state.showAddBtn&&D.default.createElement(f.default,{icon:"plus",style:{marginLeft:8},type:"primary",onClick:function(){e.setState({addModal:!0})}},"\u65b0\u5efa\u7528\u6237")))}},{key:"render",value:function(){var e=this,t=this.props.user_manage,a=t.data,r=t.loading,n=t.meta,p=(this.props.form.getFieldDecorator,function(t){return D.default.createElement(c.default,{onClick:function(a){return e.handleMenuClick(a,t)},selectedKeys:[]},e.state.user_password_reset&&(1===t.protection_level||3===t.protection_level)&&D.default.createElement(c.default.Item,{key:"reset"},"\u91cd\u7f6e\u5bc6\u7801"),e.state.showdelBtn&&2!==t.protection_level&&D.default.createElement(c.default.Item,{key:"delete"},"\u5220\u9664"))}),m=[{title:"\u7528\u6237\u540d",dataIndex:"username",width:100,fixed:"left"},{title:"\u89d2\u8272",width:100,dataIndex:"role_display_name"},{title:"\u72b6\u6001",dataIndex:"status",width:80,render:function(e){return D.default.createElement(i.default,{status:1===e?"success":"error",text:1===e?"\u542f\u7528":"\u7981\u7528"})}},{title:"\u7535\u8111\u540d\u79f0",dataIndex:"computer_name",width:120},{title:"\u7ed1\u5b9a\u72b6\u6001",dataIndex:"bind_status",width:100,render:function(e){var t="";switch(e){case 1:t="\u7b49\u5f85\u5ba1\u6838";break;case 2:t="\u5df2\u7ed1\u5b9a";break;case-1:t="\u672a\u7ed1\u5b9a";break}return t}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created_at"},{title:"\u64cd\u4f5c",width:320,fixed:"right",render:function(t,a){return D.default.createElement(D.Fragment,null,e.state.showAddBtn&&(1===a.protection_level||3===a.protection_level)&&D.default.createElement(f.default,{style:{marginRight:"8px"},type:"primary",icon:"edit",size:"small",onClick:function(){e.setState({editRecord:a,editModal:!0})}},"\u7f16\u8f91"),e.state.showAddBtn&&D.default.createElement(f.default,{style:{marginRight:"8px"},type:"primary",icon:"solution",size:"small",onClick:function(){e.setState({editRecord:a,applyModal:!0})}},"\u5ba1\u6838"),e.state.showAddBtn&&(1===a.protection_level||3===a.protection_level)&&D.default.createElement(o.default,{title:1===a.status?"\u786e\u5b9a\u8981\u7981\u7528\u5417?":"\u786e\u5b9a\u8981\u542f\u7528\u5417?",onConfirm:function(){return e.handleEditStatus(a.id,a.status)}},D.default.createElement(f.default,{style:{marginRight:"8px"},icon:"edit",size:"small"},1===a.status?"\u7981\u7528":"\u542f\u7528")),e.state.user_password_reset&&e.state.showAddBtn&&e.state.showdelBtn&&D.default.createElement(d.default,{overlay:p(a)},D.default.createElement(f.default,{size:"small"},"\u5176\u5b83 ",D.default.createElement(u.default,{type:"down"}))))}}];return D.default.createElement("div",null,D.default.createElement("div",{className:"table-title"},"\u7528\u6237\u7ba1\u7406"),D.default.createElement("div",{className:"table-page"},D.default.createElement("div",null,D.default.createElement("div",null,this.renderSimpleForm()),D.default.createElement(s.default,{style:{color:"#fff"},className:"custom-small-table",loading:r,rowKey:"id",dataSource:a,columns:m,pagination:!1,size:"small",scroll:{x:!0,y:this.state.tableY}}),D.default.createElement(O.default,{searchCondition:{username:this.state.username},meta:n,handleSearch:this.handleSearch}))),D.default.createElement(l.default,{title:"\u65b0\u5efa\u7528\u6237",visible:this.state.addModal,centered:!0,onCancel:function(){e.setState({addModal:!1})},onOk:this.handleAdd},D.default.createElement(A.default,{wrappedComponentRef:function(t){return e.AddUser=t}})),D.default.createElement(l.default,{title:"\u7f16\u8f91"+this.state.editRecord.username,destroyOnClose:!0,visible:this.state.editModal,centered:!0,onOk:this.handleEdit,onCancel:function(){e.setState({editModal:!1,editRecord:{}})}},D.default.createElement(A.default,{editRecord:this.state.editRecord,wrappedComponentRef:function(t){return e.EditUser=t}})),D.default.createElement(l.default,{title:"\u5ba1\u6838"+this.state.editRecord.username,destroyOnClose:!0,visible:this.state.applyModal,centered:!0,onOk:this.handleEditApply,onCancel:function(){e.setState({applyModal:!1,editRecord:{}})}},D.default.createElement(F.default,{wrappedComponentRef:function(t){return e.EditApplyUser=t}})))}}]),a}(D.PureComponent),C=M))||C)||C),Z=U;t.default=Z},ybbW:function(e,t,a){"use strict";var r=a("mZ4U"),n=a("fbTi");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("zAuD"));a("DvNH");var s=r(a("SzGI")),d=r(a("43Yg")),u=r(a("/tCh")),o=r(a("scpF")),i=r(a("O/V9")),c=r(a("8aBX"));a("pLlE");var f=r(a("qQZ1"));a("3nLr");var p=r(a("CWUu"));a("5KzM");var m=r(a("FCwu"));a("DCdT");var h,v,y=r(a("oyxa")),g=n(a("ZZRV")),_=a("LneV");function E(e){return function(){var t,a=(0,i.default)(e);if(b()){var r=(0,i.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}y.default.TreeNode;var S=m.default.Item,w=(p.default.Group,f.default.Option),R=(y.default.SHOW_PARENT,h=(0,_.connect)(function(e){var t=e.roles;return{roles:t}}),h(v=function(e){(0,c.default)(a,e);var t=E(a);function a(e){var r;return(0,d.default)(this,a),r=t.call(this,e),r.state={showCustom:!1},r}return(0,u.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"roles/fetch"})}},{key:"render",value:function(){var e={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:15}}},t=this.props.form.getFieldDecorator;return g.default.createElement("div",null,g.default.createElement(m.default,{onSubmit:this.handleSubmit},g.default.createElement(S,(0,l.default)({},e,{label:g.default.createElement("span",null,"\u7528\u6237\u540d")}),t("username",{initialValue:this.props.editRecord?this.props.editRecord.username:"",rules:[{required:!0}]})(g.default.createElement(s.default,{disabled:!!this.props.editRecord}))),g.default.createElement(S,(0,l.default)({},e,{label:g.default.createElement("span",null,"\u89d2\u8272")}),t("role_id",{initialValue:this.props.editRecord?{key:this.props.editRecord.role_id,label:this.props.editRecord.role_display_name}:{key:"",label:""},rules:[{required:!0}]})(g.default.createElement(f.default,{labelInValue:!0},this.props.roles.data.map(function(e,t){return g.default.createElement(w,{key:e.id,disabled:-1===e.status,value:e.id.toString()},e.name)}))))))}}]),a}(g.Component))||v),k=m.default.create()(R),C=(0,_.connect)()(k);t.default=C}}]);