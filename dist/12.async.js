(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"6rLP":function(e,t,a){"use strict";var l=a("mZ4U"),r=a("fbTi");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("zAuD"));a("YbtD");var o=l(a("Bk9f"));a("UOoy");var c=l(a("nPKv"));a("77AG");l(a("czPo"));a("CuyC");var i=l(a("PdMq"));a("nCvR");var d=l(a("otiJ")),s=l(a("mK77")),u=l(a("43Yg")),f=l(a("/tCh")),m=l(a("Tfcp")),p=l(a("scpF")),h=l(a("O/V9")),_=l(a("8aBX"));a("DvNH");var y=l(a("SzGI"));a("pLlE");var g=l(a("qQZ1"));a("3nLr");var b=l(a("CWUu"));a("5KzM");var v,w,S,E,k=l(a("FCwu")),x=r(a("ZZRV")),M=(a("EaaV"),l(a("a/LZ"))),Y=a("LneV"),C=l(a("UARf")),D=l(a("IgAV")),N=(l(a("y2ml")),l(a("eKz+")),l(a("t3Un"))),I=l(a("voBT"));a("DWJA");function L(e){return function(){var t,a=(0,h.default)(e);if(K()){var l=(0,h.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,p.default)(this,t)}}function K(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var P=k.default.Item,R=(b.default.Button,b.default.Group,g.default.Option,y.default.Search,y.default.TextArea,v=(0,Y.connect)(function(e){var t=e.historical_data;e.loading;return{historical_data:t}}),w=k.default.create(),v(S=w((E=function(e){(0,_.default)(a,e);var t=L(a);function a(e){var l;return(0,u.default)(this,a),l=t.call(this,e),l.resize=function(){l.setState({tableY:document.querySelector(".table-page").offsetHeight-200})},l.handleSearch=function(e,t){console.log("handleSearch",e);var a=(0,m.default)(l),r=l.props.dispatch;r({type:"historical_data/fetch",payload:(0,s.default)({},e,{id:l.id}),callback:function(){console.log("handleSearch callback"),a.setState((0,s.default)({},e,{key:a.state.key+1})),t&&t()}})},l.handleFormReset=function(){var e=l.props.form;e.resetFields(),l.handleSearch({page:1,per_page:30,name:"",number:"",status:"",started_at:(0,M.default)().format("YYYY-MM-DD 00:00:00"),ended_at:(0,M.default)().format("YYYY-MM-DD HH:mm:ss")})},console.log("this.props",l.props),l.id=l.props.history.location.query.id,l.name=l.props.history.location.query.name,l.permissions=JSON.parse(localStorage.getItem("permissions")),l.state={showAddBtn:(0,I.default)(l.permissions,{name:"location_add_and_edit"}),showdelBtn:(0,I.default)(l.permissions,{name:"location_delete"}),visible:!1,done:!1,page:1,per_page:30,name:"",number:"",status:"",editRecord:{},started_at:(0,M.default)().format("YYYY-MM-DD 00:00:00"),ended_at:(0,M.default)().format("YYYY-MM-DD HH:mm:ss"),data:{},key:0},l}return(0,f.default)(a,[{key:"componentDidMount",value:function(){var e=this;(0,N.default)("/rtus/".concat(this.id),{method:"GET"}).then(function(t){200===t.status&&e.setState({data:t.data.data})})}},{key:"componentWillUnmount",value:function(){console.log("componentWillUnmount"),window.removeEventListener("resize",this.resize)}},{key:"renderSimpleForm",value:function(){var e=this,t=this.props.form.getFieldDecorator;return x.default.createElement(k.default,{layout:"inline",className:"search-form"},x.default.createElement(P,{label:"\u5f00\u59cb\u65e5\u671f"},t("started_at",{initialValue:(0,M.default)((0,M.default)().format("YYYY-MM-DD 00:00:00"))})(x.default.createElement(d.default,{allowClear:!1,showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD"}))),x.default.createElement(P,{label:"\u7ed3\u675f\u65e5\u671f"},t("ended_at",{initialValue:(0,M.default)()})(x.default.createElement(d.default,{allowClear:!1,showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD"}))),x.default.createElement(k.default.Item,{label:"\u72b6\u6001"},t("status",{initialValue:""})(x.default.createElement(g.default,{style:{width:"100px"}},x.default.createElement(g.default.Option,{value:""},"\u5168\u90e8"),x.default.createElement(g.default.Option,{value:"1"},"\u6b63\u5e38"),x.default.createElement(g.default.Option,{value:"-4"},"\u62a5\u8b66")))),x.default.createElement(P,null,x.default.createElement(i.default,{type:"primary",icon:"search",onClick:function(){var t=e.props.form;t.validateFields(function(t,a){if(!t){var l=(0,s.default)({},a);e.handleSearch((0,s.default)({page:e.state.page,per_page:e.state.per_page},l,{started_at:a.started_at.format("YYYY-MM-DD HH:mm:ss"),ended_at:a.ended_at.format("YYYY-MM-DD HH:mm:ss")}))}})}},"\u67e5\u8be2"),x.default.createElement(i.default,{style:{marginLeft:8},icon:"redo",onClick:this.handleFormReset},"\u91cd\u7f6e")))}},{key:"render",value:function(){var e=this.props.historical_data,t=(e.data,e.loading,e.meta,o.default,c.default,"");switch(console.log("this.state.data.hardware_model",this.state.data),console.log("key",this.state.key),this.state.data.hardware_model){case"RTU-03":t=x.default.createElement(C.default,(0,n.default)({key:this.state.key},this.props,{started_at:this.state.started_at,ended_at:this.state.ended_at,config_data:this.state.data.hardware_configs}));break;case"RTU-04":t=x.default.createElement(D.default,(0,n.default)({key:this.state.key},this.props,{started_at:this.state.started_at,ended_at:this.state.ended_at,config_data:this.state.data.hardware_configs}));break;default:break}return x.default.createElement(x.Fragment,null,t)}}]),a}(x.PureComponent),S=E))||S)||S),T=R;t.default=T},BoxD:function(e){e.exports=JSON.parse('{"color":["#ff5190","#2ba8fb","#f0db17","#8c6ac4","#27d4d4","#38db48","#f7763c"],"backgroundColor":"#000000","textStyle":{},"title":{"textStyle":{"color":"#ffaf51"},"subtextStyle":{"color":"#eeeeee"}},"line":{"itemStyle":{"normal":{"borderWidth":"2"}},"lineStyle":{"normal":{"width":"3"}},"smooth":false},"radar":{"itemStyle":{"normal":{"borderWidth":"2"}},"lineStyle":{"normal":{"width":"3"}},"smooth":false},"bar":{"itemStyle":{"normal":{"barBorderWidth":"0","barBorderColor":"#ccc"},"emphasis":{"barBorderWidth":"0","barBorderColor":"#ccc"}}},"pie":{"itemStyle":{"normal":{"borderWidth":"0","borderColor":"#ccc"},"emphasis":{"borderWidth":"0","borderColor":"#ccc"}}},"scatter":{"itemStyle":{"normal":{"borderWidth":"0","borderColor":"#ccc"},"emphasis":{"borderWidth":"0","borderColor":"#ccc"}}},"boxplot":{"itemStyle":{"normal":{"borderWidth":"0","borderColor":"#ccc"},"emphasis":{"borderWidth":"0","borderColor":"#ccc"}}},"parallel":{"itemStyle":{"normal":{"borderWidth":"0","borderColor":"#ccc"},"emphasis":{"borderWidth":"0","borderColor":"#ccc"}}},"sankey":{"itemStyle":{"normal":{"borderWidth":"0","borderColor":"#ccc"},"emphasis":{"borderWidth":"0","borderColor":"#ccc"}}},"funnel":{"itemStyle":{"normal":{"borderWidth":"0","borderColor":"#ccc"},"emphasis":{"borderWidth":"0","borderColor":"#ccc"}}},"gauge":{"itemStyle":{"normal":{"borderWidth":"0","borderColor":"#ccc"},"emphasis":{"borderWidth":"0","borderColor":"#ccc"}}},"candlestick":{"itemStyle":{"normal":{"color":"#ffee51","color0":"#ffffff","borderColor":"#ff715e","borderColor0":"#797fba","borderWidth":"1"}}},"graph":{"itemStyle":{"normal":{"borderWidth":"0","borderColor":"#ccc"}},"lineStyle":{"normal":{"width":"1","color":"#888888"}},"smooth":false,"color":["#ff5190","#2ba8fb","#f0db17","#8c6ac4","#27d4d4","#38db48","#f7763c"],"label":{"normal":{"textStyle":{"color":"#f7f1f1"}}}},"map":{"itemStyle":{"normal":{"areaColor":"#555555","borderColor":"#999999","borderWidth":0.5},"emphasis":{"areaColor":"rgba(255,175,81,0.5)","borderColor":"#ffaf51","borderWidth":1}},"label":{"normal":{"textStyle":{"color":"#ffffff"}},"emphasis":{"textStyle":{"color":"rgb(255,238,81)"}}}},"geo":{"itemStyle":{"normal":{"areaColor":"#555555","borderColor":"#999999","borderWidth":0.5},"emphasis":{"areaColor":"rgba(255,175,81,0.5)","borderColor":"#ffaf51","borderWidth":1}},"label":{"normal":{"textStyle":{"color":"#ffffff"}},"emphasis":{"textStyle":{"color":"rgb(255,238,81)"}}}},"categoryAxis":{"axisLine":{"show":true,"lineStyle":{"color":"#ffffff"}},"axisTick":{"show":false,"lineStyle":{"color":"#333"}},"axisLabel":{"show":true,"textStyle":{"color":"#ffffff"}},"splitLine":{"show":true,"lineStyle":{"color":["#555555"]}},"splitArea":{"show":false,"areaStyle":{"color":["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},"valueAxis":{"axisLine":{"show":true,"lineStyle":{"color":"#ffffff"}},"axisTick":{"show":false,"lineStyle":{"color":"#333"}},"axisLabel":{"show":true,"textStyle":{"color":"#ffffff"}},"splitLine":{"show":true,"lineStyle":{"color":["#555555"]}},"splitArea":{"show":false,"areaStyle":{"color":["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},"logAxis":{"axisLine":{"show":true,"lineStyle":{"color":"#ffffff"}},"axisTick":{"show":false,"lineStyle":{"color":"#333"}},"axisLabel":{"show":true,"textStyle":{"color":"#ffffff"}},"splitLine":{"show":true,"lineStyle":{"color":["#555555"]}},"splitArea":{"show":false,"areaStyle":{"color":["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},"timeAxis":{"axisLine":{"show":true,"lineStyle":{"color":"#ffffff"}},"axisTick":{"show":false,"lineStyle":{"color":"#333"}},"axisLabel":{"show":true,"textStyle":{"color":"#ffffff"}},"splitLine":{"show":true,"lineStyle":{"color":["#555555"]}},"splitArea":{"show":false,"areaStyle":{"color":["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},"toolbox":{"iconStyle":{"normal":{"borderColor":"#999999"},"emphasis":{"borderColor":"#666666"}}},"legend":{"textStyle":{"color":"#ffffff"}},"tooltip":{"axisPointer":{"lineStyle":{"color":"#cccccc","width":1},"crossStyle":{"color":"#cccccc","width":1}}},"timeline":{"lineStyle":{"color":"#ffaf51","width":1},"itemStyle":{"normal":{"color":"#ffaf51","borderWidth":1},"emphasis":{"color":"#ffaf51"}},"controlStyle":{"normal":{"color":"#ffaf51","borderColor":"#ffaf51","borderWidth":0.5},"emphasis":{"color":"#ffaf51","borderColor":"#ffaf51","borderWidth":0.5}},"checkpointStyle":{"color":"#ff715e","borderColor":"rgba(255,113,94,0.4)"},"label":{"normal":{"textStyle":{"color":"#ff715e"}},"emphasis":{"textStyle":{"color":"#ff715e"}}}},"visualMap":{"color":["#ff715e","#ffee51","#797fba"]},"dataZoom":{"backgroundColor":"rgba(255,255,255,0)","dataBackgroundColor":"rgba(222,222,222,1)","fillerColor":"rgba(255,113,94,0.2)","handleColor":"#cccccc","handleSize":"100%","textStyle":{"color":"#999999"}},"markPoint":{"label":{"normal":{"textStyle":{"color":"#f7f1f1"}},"emphasis":{"textStyle":{"color":"#f7f1f1"}}}}}')},DYym:function(e,t,a){"use strict";var l=a("fbTi"),r=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("nQ6Z");var n=r(a("21tn")),o=r(a("zAuD")),c=r(a("mK77")),i=r(a("43Yg")),d=r(a("/tCh")),s=r(a("scpF")),u=r(a("O/V9")),f=r(a("8aBX")),m=l(a("ZZRV"));function p(e){return function(){var t,a=(0,u.default)(e);if(h()){var l=(0,u.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,s.default)(this,t)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _=function(e){(0,f.default)(a,e);var t=p(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,d.default)(a,[{key:"render",value:function(){var e=this,t=this.props.meta,a={showSizeChanger:!0,showTotal:function(e,t){return m.default.createElement("span",null,"\u5f53\u524d\u663e\u793a ",m.default.createElement("span",{className:"pagination-blue"},t[0])," \u5230 ",m.default.createElement("span",{className:"pagination-blue"},t[1])," \u6761 , \u5171 ",m.default.createElement("span",{className:"pagination-blue"},e)," \u6761")},pageSize:t.per_page,total:t.total,size:"small",current:t.current_page,onChange:function(t,a){e.props.handleSearch((0,c.default)({page:t,per_page:a},e.props.searchCondition))},onShowSizeChange:function(t,a){e.props.handleSearch((0,c.default)({page:t,per_page:a},e.props.searchCondition))}};return m.default.createElement(n.default,(0,o.default)({},a,{className:this.props.className}))}}]),a}(m.PureComponent);t.default=_},IgAV:function(e,t,a){"use strict";var l=a("mZ4U"),r=a("fbTi");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("tIwr");var n=l(a("IX2G"));a("77AG");var o=l(a("czPo"));a("Jkyn");var c=l(a("DwzN"));a("UOoy");var i=l(a("nPKv"));a("CuyC");var d=l(a("PdMq"));a("nCvR");var s=l(a("otiJ")),u=l(a("mK77")),f=l(a("3CjV")),m=l(a("43Yg")),p=l(a("/tCh")),h=l(a("Tfcp")),_=l(a("scpF")),y=l(a("O/V9")),g=l(a("8aBX"));a("weQp");var b=l(a("sbBR"));a("5KzM");var v,w,S,E,k=l(a("FCwu")),x=r(a("ZZRV")),M=l(a("a/LZ")),Y=a("LneV"),C=a("+n12"),D=l(a("DYym")),N=l(a("voBT")),I=(l(a("LiEA")),l(a("xLTU"))),L=l(a("t3Un")),K=l(a("c6aW"));function P(e){return function(){var t,a=(0,y.default)(e);if(R()){var l=(0,y.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,_.default)(this,t)}}function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var T=k.default.Item,W=b.default.TabPane,H=(v=(0,Y.connect)(function(e){var t=e.historical_data;e.loading;return{historical_data:t}}),w=k.default.create(),v(S=w((E=function(e){(0,g.default)(a,e);var t=P(a);function a(e){var l;return(0,m.default)(this,a),l=t.call(this,e),l.fetch=function(e){var t=(0,h.default)(l);l.setState((0,f.default)({},"".concat(e.type,"_").concat(e.channel),{meta:l.state["".concat(e.type,"_").concat(e.channel)].meta,data:l.state["".concat(e.type,"_").concat(e.channel)].data,loading:!0})),(0,L.default)("/locations/".concat(l.id,"/historical_data"),{method:"GET",params:(0,u.default)({},e,{started_at:l.state.started_at,ended_at:l.state.ended_at})}).then(function(a){200===a.status&&t.setState((0,f.default)({},"".concat(e.type,"_").concat(e.channel),{meta:a.data.meta,data:a.data.data,loading:!1}))})},l.resize=function(){l.setState({tableY:document.querySelector(".table-page").offsetHeight-215})},l.handleFormReset=function(){var e=l.props.form;e.resetFields(),l.setState({started_at:(0,M.default)().format("YYYY-MM-DD 00:00:00"),ended_at:(0,M.default)().format("YYYY-MM-DD HH:mm:ss")},function(){this.fetch({type:"device",channel:0,page:1,per_page:20});for(var e=0;e<4;e++)this.fetch({type:"modbus",channel:e,page:1,per_page:20})})},console.log("this.props",l.props),l.id=l.props.history.location.query.id,l.name=l.props.history.location.query.name,l.permissions=JSON.parse(localStorage.getItem("permissions")),l.state={showAddBtn:(0,N.default)(l.permissions,{name:"location_add_and_edit"}),showdelBtn:(0,N.default)(l.permissions,{name:"location_delete"}),visible:!1,done:!1,page:1,per_page:30,name:"",number:"",status:"",editRecord:{},started_at:(0,M.default)().format("YYYY-MM-DD 00:00:00"),ended_at:(0,M.default)().format("YYYY-MM-DD HH:mm:ss"),chartModal:!1,chartData:[],chartKey:"",tabPanes:[{name:"\u8bbe\u5907\u4fe1\u606f",key:"device"},{name:"Modbus",key:"modbus"}],device_0:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},modbus_0:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},modbus_1:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},modbus_2:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},modbus_3:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1}},l}return(0,p.default)(a,[{key:"componentDidMount",value:function(){console.log("config_data",this.props.config_data),this.setState({tableY:document.querySelector(".table-page").offsetHeight-250});this.props.config_data,this.state.tabPanes;this.fetch({type:"device",channel:0,page:1,per_page:20});for(var e=0;e<4;e++)this.fetch({type:"modbus",channel:e,page:1,per_page:20})}},{key:"componentWillUnmount",value:function(){console.log("componentWillUnmount"),window.removeEventListener("resize",this.resize)}},{key:"renderSimpleForm",value:function(){var e=this,t=this.props.form.getFieldDecorator;return x.default.createElement(k.default,{layout:"inline",className:"search-form"},x.default.createElement(T,{label:"\u5f00\u59cb\u65e5\u671f"},t("started_at",{initialValue:(0,M.default)((0,M.default)().format("YYYY-MM-DD 00:00:00"))})(x.default.createElement(s.default,{allowClear:!1,showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD"}))),x.default.createElement(T,{label:"\u7ed3\u675f\u65e5\u671f"},t("ended_at",{initialValue:(0,M.default)()})(x.default.createElement(s.default,{allowClear:!1,showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD"}))),x.default.createElement(T,null,x.default.createElement(d.default,{type:"primary",icon:"search",onClick:function(){var t=e.props.form;t.validateFields(function(t,a){if(!t){(0,u.default)({},a);e.setState({started_at:a.started_at.format("YYYY-MM-DD HH:mm:ss"),ended_at:a.ended_at.format("YYYY-MM-DD HH:mm:ss")},function(){this.fetch({type:"device",channel:0,page:1,per_page:20});for(var e=0;e<4;e++)this.fetch({type:"modbus",channel:e,page:1,per_page:20})})}})}},"\u67e5\u8be2"),x.default.createElement(d.default,{style:{marginLeft:8},icon:"redo",onClick:this.handleFormReset},"\u91cd\u7f6e")))}},{key:"render",value:function(){var e=this,t=this.props.historical_data,a=(t.data,t.loading,t.meta,this);return x.default.createElement("div",null,x.default.createElement("div",{className:"table-title"},x.default.createElement("span",{onClick:function(){return e.props.history.goBack()},style:{cursor:"pointer"}},"\u76d1\u63a7\u70b9\u5217\u8868"),">>",this.name," \u5386\u53f2\u6570\u636e"),x.default.createElement("div",{className:"table-page history-page"},x.default.createElement("div",null,x.default.createElement("div",null,this.renderSimpleForm()),x.default.createElement(b.default,{defaultActiveKey:"device"},this.state.tabPanes.map(function(t,l){var r="";if("device"===t.key&&(r=x.default.createElement(W,{tab:t.name,key:t.key},x.default.createElement("div",{style:{width:"55%"}},x.default.createElement(c.default,{style:{color:"#fff"},className:"custom-small-table ".concat(0===e.state["device_0"].data.length&&"custom-small-table2"),loading:e.state["device_0"].loading,rowKey:"id",dataSource:e.state.device_0.data,columns:[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",width:120,render:function(e,t){return(0,C.ellipsis2)(e.slice(5),120)}},{title:"\u8fd0\u884c\u65f6\u95f4(\u79d2)",dataIndex:"uptime",width:100,render:function(e,t){return(0,C.ellipsis2)(t.data.uptime,100)}},{title:"\u91cd\u7f6e\u539f\u56e0",dataIndex:"reset_reason",width:100,render:function(e,t){return(0,C.ellipsis2)(t.data.reset_reason,100)}},{title:x.default.createElement("span",null,"\u4f9b\u7535\u7535\u538b(V)",x.default.createElement(i.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"\u4f9b\u7535\u7535\u538b(V)",chartData:e.state.device_0.data,chartKey:"supply_voltage",chartModal:!0})}})),dataIndex:"supply_voltage",width:135,render:function(e,t){return(0,C.ellipsis2)(t.data.supply_voltage/1e3,135)}},{title:x.default.createElement("span",null,"\u4fe1\u53f7\u8d28\u91cf(dbm)",x.default.createElement(i.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"\u4fe1\u53f7\u8d28\u91cf(dbm)",chartData:e.state.device_0.data,chartKey:"network_signal_quality",chartModal:!0})}})),dataIndex:"network_signal_quality",render:function(e,t){return(0,C.ellipsis2)(t.data.network_signal_quality,100)}}],pagination:!1,size:"small",scroll:{x:600,y:e.state.tableY}}),x.default.createElement(D.default,{className:"history-pagination",searchCondition:{type:t.key,channel:0},meta:e.state["".concat(t.key,"_0")].meta,handleSearch:e.fetch})))),"modbus"===t.key){var n=(0,I.default)(a.props.config_data.modbus,function(e){return e.type});console.log("defaultKey",n),r=x.default.createElement(W,{tab:t.name,key:t.key},n>=0&&x.default.createElement(b.default,{size:"small",className:"no-padding",defaultActiveKey:n.toString()},a.props.config_data.modbus.map(function(l,r){var n=[],d=!0,s=a.props.config_data.modbus[r].type;return"SCL-61D-GTE50"!==a.props.config_data.modbus[r].type&&"SCL-61D-LT50"!==a.props.config_data.modbus[r].type||(d=1100,s="Modbus-".concat(r+1,":\u6c47\u4e2d SCL-61D(\u7ba1\u5f84\u226550mm)"),n=[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",width:120,render:function(e,t){return(0,C.ellipsis2)(e.slice(5),120)}},{title:"\u72b6\u6001",dataIndex:"data_length",width:70,render:function(e,t){return Number(t.data.data_length)>0?x.default.createElement(o.default,{color:"#87d068",text:""}):x.default.createElement(o.default,{color:"#f50",text:""})}},{title:x.default.createElement("span",null,"\u77ac\u65f6\u6d41\u91cf(m\xb3/h)",x.default.createElement(i.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u77ac\u65f6\u6d41\u91cf(m\xb3/h)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"instantaneous_flow",chartModal:!0})}})),dataIndex:"instantaneous_flow",width:125,render:function(e,t){return(0,C.ellipsis2)(t.data.instantaneous_flow,120)}},{title:x.default.createElement("span",null,"\u6b63\u7d2f\u8ba1\u6d41\u91cf(m\xb3)",x.default.createElement(i.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u6b63\u7d2f\u8ba1\u6d41\u91cf(m\xb3)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"positive_cumulative_flow",chartModal:!0})}})),width:125,dataIndex:"positive_cumulative_flow",render:function(e,t){return(0,C.ellipsis2)(t.data.positive_cumulative_flow,120)}},{title:"\u6b63\u7d2f\u8ba1\u8fd0\u884c\u65f6\u95f4(\u5c0f\u65f6)",dataIndex:"positive_running_time",width:140,render:function(e,t){return(0,C.ellipsis2)(t.data.positive_running_time,140)}},{title:x.default.createElement("span",null,"\u8d1f\u7d2f\u8ba1\u6d41\u91cf(m\xb3)",x.default.createElement(i.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u8d1f\u7d2f\u8ba1\u6d41\u91cf(m\xb3)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"reverse_cumulative_flow",chartModal:!0})}})),dataIndex:"reverse_cumulative_flow",width:125,render:function(e,t){return(0,C.ellipsis2)(t.data.reverse_cumulative_flow,120)}},{title:"\u8d1f\u7d2f\u8ba1\u8fd0\u884c\u65f6\u95f4(\u5c0f\u65f6)",dataIndex:"reverse_running_time",width:140,render:function(e,t){return(0,C.ellipsis2)(t.data.reverse_running_time,140)}},{title:x.default.createElement("span",null,"\u538b\u529b(MPa)",x.default.createElement(i.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u538b\u529b(MPa)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"pressure_value",chartModal:!0})}})),dataIndex:"pressure_value",width:95,render:function(e,t){return(0,C.ellipsis2)(t.data.pressure_value,95)}},{title:"\u8bca\u65ad\u4fe1\u606f\u4ee3\u7801",dataIndex:"code",render:function(e,t){return(0,C.ellipsis2)(t.data.code,100)}}]),"SCL-61D-LT50"===a.props.config_data.modbus[r].type&&(d=1100,s="Modbus-".concat(r+1,":\u6c47\u4e2d SCL-61D(\u7ba1\u5f84<50mm)")),"PCM380L"===a.props.config_data.modbus[r].type&&(s="Modbus-".concat(r+1,":\u538b\u529b\u4f20\u611f\u5668"),n=[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",width:120,render:function(e,t){return(0,C.ellipsis2)(e.slice(5),120)}},{title:x.default.createElement("span",null,"\u538b\u529b(MPa)",x.default.createElement(i.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u538b\u529b(MPa)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"pressure_value",chartModal:!0})}})),dataIndex:"pressure_value",render:function(e,t){return(0,C.ellipsis2)(t.data.pressure_value,100)}},{title:"\u72b6\u6001",dataIndex:"data_length",render:function(e,t){return Number(t.data.data_length)>0?x.default.createElement(o.default,{color:"#87d068",text:"\u6b63\u5e38"}):x.default.createElement(o.default,{color:"#f50",text:"\u9519\u62a5"})}}]),Boolean(a.props.config_data.modbus[r].type)&&x.default.createElement(W,{tab:"".concat(s),key:r},x.default.createElement("div",null,x.default.createElement(c.default,{style:{color:"#fff"},className:"custom-small-table ".concat(0===e.state["modbus_".concat(r)].data.length&&"custom-small-table2"),loading:e.state["".concat(t.key,"_").concat(r)].loading,rowKey:"id",dataSource:e.state["modbus_".concat(r)].data,columns:n,pagination:!1,size:"small",scroll:{x:d,y:e.state.tableY-40}}),x.default.createElement(D.default,{className:"history-pagination",searchCondition:{type:t.key,channel:r},meta:e.state["".concat(t.key,"_").concat(r)].meta,handleSearch:e.fetch})))})))}return r})))),x.default.createElement(n.default,{title:!1,destroyOnClose:!0,visible:this.state.chartModal,closable:!1,footer:!1,centered:!0,width:"900px",onCancel:function(){e.setState({chartModal:!1,chartData:[],chartKey:""})}},x.default.createElement(K.default,{chartData:this.state.chartData,chartKey:this.state.chartKey,title:this.state.title})))}}]),a}(x.PureComponent),S=E))||S)||S),z=H;t.default=z},LiEA:function(e,t,a){var l=a("GLqZ"),r=a("oY/l"),n=a("KNdF"),o=a("omV8");function c(e,t){var a=o(e)?l:r;return a(e,n(t,3))}e.exports=c},UARf:function(e,t,a){"use strict";var l=a("mZ4U"),r=a("fbTi");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("tIwr");var n=l(a("IX2G"));a("UOoy");var o=l(a("nPKv"));a("Jkyn");var c=l(a("DwzN"));a("77AG");var i=l(a("czPo"));a("CuyC");var d=l(a("PdMq"));a("nCvR");var s=l(a("otiJ")),u=l(a("mK77")),f=l(a("3CjV")),m=l(a("43Yg")),p=l(a("/tCh")),h=l(a("Tfcp")),_=l(a("scpF")),y=l(a("O/V9")),g=l(a("8aBX"));a("weQp");var b=l(a("sbBR"));a("5KzM");var v,w,S,E,k=l(a("FCwu")),x=r(a("ZZRV")),M=l(a("a/LZ")),Y=a("LneV"),C=a("+n12"),D=l(a("DYym")),N=l(a("voBT")),I=(l(a("LiEA")),l(a("xLTU")),l(a("t3Un"))),L=l(a("c6aW"));function K(e){return function(){var t,a=(0,y.default)(e);if(P()){var l=(0,y.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,_.default)(this,t)}}function P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var R=k.default.Item,T=b.default.TabPane,W=(v=(0,Y.connect)(function(e){var t=e.historical_data;e.loading;return{historical_data:t}}),w=k.default.create(),v(S=w((E=function(e){(0,g.default)(a,e);var t=K(a);function a(e){var l;return(0,m.default)(this,a),l=t.call(this,e),l.fetch=function(e){var t=(0,h.default)(l);l.setState((0,f.default)({},"".concat(e.type,"_").concat(e.channel),{meta:l.state["".concat(e.type,"_").concat(e.channel)].meta,data:l.state["".concat(e.type,"_").concat(e.channel)].data,loading:!0})),(0,I.default)("/rtus/".concat(l.id,"/historical_data"),{method:"GET",params:(0,u.default)({},e,{started_at:l.state.started_at,ended_at:l.state.ended_at})}).then(function(a){200===a.status&&t.setState((0,f.default)({},"".concat(e.type,"_").concat(e.channel),{meta:a.data.meta,data:a.data.data,loading:!1}))})},l.fetchLog=function(e){var t=(0,h.default)(l);l.setState({online_logs:{meta:l.state.online_logs.meta,data:l.state.online_logs.data,loading:!0}}),(0,I.default)("/rtus/".concat(l.id,"/online_logs"),{method:"GET",params:(0,u.default)({},e,{started_at:l.state.started_at,ended_at:l.state.ended_at})}).then(function(e){200===e.status&&t.setState({online_logs:{meta:e.data.meta,data:e.data.data,loading:!1}})})},l.resize=function(){l.setState({tableY:document.querySelector(".table-page").offsetHeight-205})},l.handleSearch=function(e,t){console.log("handleSearch",e);var a=(0,h.default)(l),r=l.props.dispatch;r({type:"historical_data/fetch",payload:(0,u.default)({},e,{id:l.id}),callback:function(){console.log("handleSearch callback"),a.setState((0,u.default)({},e)),t&&t()}})},l.handleFormReset=function(){var e=l.props.form;e.resetFields(),l.setState({started_at:(0,M.default)().format("YYYY-MM-DD 00:00:00"),ended_at:(0,C.todayLastSecond)()},function(){this.fetch({type:"device",channel:0,page:1,per_page:20});for(var e=0;e<4;e++)this.fetch({type:"sensor",channel:e,page:1,per_page:20}),this.fetch({type:"modbus",channel:e,page:1,per_page:20});for(var t=0;t<2;t++)this.fetch({type:"digital_input",channel:t,page:1,per_page:20}),this.fetch({type:"digital_output",channel:t,page:1,per_page:20}),this.fetch({type:"ball_valve",channel:t,page:1,per_page:20})})},console.log("this.props",l.props),l.id=l.props.history.location.query.id,l.name=l.props.history.location.query.name,l.permissions=JSON.parse(localStorage.getItem("permissions")),l.state={showAddBtn:(0,N.default)(l.permissions,{name:"location_add_and_edit"}),showdelBtn:(0,N.default)(l.permissions,{name:"location_delete"}),visible:!1,done:!1,page:1,per_page:30,name:"",number:"",status:"",editRecord:{},started_at:(0,M.default)().format("YYYY-MM-DD 00:00:00"),ended_at:(0,C.todayLastSecond)(),chartModal:!1,chartData:[],chartKey:"",tabPanes:[{name:"\u4e0a\u4e0b\u7ebf\u65e5\u5fd7",key:"online_logs"},{name:"\u8bbe\u5907\u4fe1\u606f",key:"device"},{name:"\u4f20\u611f\u5668",key:"sensor"},{name:"\u6570\u5b57\u8f93\u5165",key:"digital_input"},{name:"\u7403\u9600",key:"ball_valve"},{name:"Modbus",key:"modbus"}],online_logs:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},device_0:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},sensor_0:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},sensor_1:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},sensor_2:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},sensor_3:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},modbus_0:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},modbus_1:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},modbus_2:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},modbus_3:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},digital_input_0:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},digital_input_1:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},digital_output_0:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},digital_output_1:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},ball_valve_0:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1},ball_valve_1:{meta:{total:0,per_page:0,current_page:1},data:[],loading:!1}},l}return(0,p.default)(a,[{key:"componentDidMount",value:function(){console.log("config_data",this.props.config_data),this.setState({tableY:document.querySelector(".table-page").offsetHeight-195});this.props.config_data,this.state.tabPanes;this.fetchLog({page:1,per_page:20}),this.fetch({type:"device",channel:0,page:1,per_page:20});for(var e=0;e<4;e++)this.fetch({type:"sensor",channel:e,page:1,per_page:20});for(var t=0;t<4;t++)this.fetch({type:"modbus",channel:t,page:1,per_page:20})}},{key:"componentWillUnmount",value:function(){console.log("componentWillUnmount"),window.removeEventListener("resize",this.resize)}},{key:"renderSimpleForm",value:function(){var e=this,t=this.props.form.getFieldDecorator;return x.default.createElement(k.default,{layout:"inline",className:"search-form"},x.default.createElement(R,{label:"\u5f00\u59cb\u65e5\u671f"},t("started_at",{initialValue:(0,M.default)((0,M.default)().format("YYYY-MM-DD 00:00:00"))})(x.default.createElement(s.default,{allowClear:!1,showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD"}))),x.default.createElement(R,{label:"\u7ed3\u675f\u65e5\u671f"},t("ended_at",{initialValue:(0,M.default)((0,C.todayLastSecond)())})(x.default.createElement(s.default,{allowClear:!1,showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD"}))),x.default.createElement(R,null,x.default.createElement(d.default,{type:"primary",icon:"search",onClick:function(){var t=e.props.form;t.validateFields(function(t,a){if(!t){(0,u.default)({},a);e.setState({started_at:a.started_at.format("YYYY-MM-DD HH:mm:ss"),ended_at:a.ended_at.format("YYYY-MM-DD HH:mm:ss")},function(){this.fetchLog({page:1,per_page:20}),this.fetch({type:"device",channel:0,page:1,per_page:20});for(var e=0;e<4;e++)this.fetch({type:"sensor",channel:e,page:1,per_page:20}),this.fetch({type:"modbus",channel:e,page:1,per_page:20});for(var t=0;t<2;t++)this.fetch({type:"digital_input",channel:t,page:1,per_page:20}),this.fetch({type:"digital_output",channel:t,page:1,per_page:20}),this.fetch({type:"ball_valve",channel:t,page:1,per_page:20})})}})}},"\u67e5\u8be2"),x.default.createElement(d.default,{style:{marginLeft:8},icon:"redo",onClick:this.handleFormReset},"\u91cd\u7f6e")))}},{key:"render",value:function(){var e=this,t=this.props.historical_data,a=(t.data,t.loading,t.meta,this);return x.default.createElement("div",null,x.default.createElement("div",{className:"table-title"},x.default.createElement("span",{onClick:function(){return e.props.history.goBack()},style:{cursor:"pointer"}},"\u7ad9\u70b9\u5217\u8868")," >> ",this.name," \u6570\u636e\u65e5\u5fd7"),x.default.createElement("div",{className:"table-page history-page"},x.default.createElement("div",null,x.default.createElement("div",null,this.renderSimpleForm()),x.default.createElement(b.default,{className:"left-tab",defaultActiveKey:"devices_history",tabPosition:"left",style:{height:this.state.tableY+120+"px"}},[{name:"\u8bbe\u5907\u65e5\u5fd7",key:"devices_history"},{name:"\u91c7\u96c6\u65e5\u5fd7",key:"get_history"}].map(function(t,l){return x.default.createElement(T,{tab:t.name,key:l},x.default.createElement(b.default,{defaultActiveKey:"online_logs",size:"small",style:{paddingLeft:"10px"}},e.state.tabPanes.map(function(l,r){var n="";if("online_logs"===l.key&&"devices_history"===t.key&&(n=x.default.createElement(T,{tab:l.name,key:l.key},x.default.createElement("div",null,x.default.createElement(c.default,{style:{color:"#fff"},className:"custom-small-table ".concat(0===e.state["online_logs"].data.length&&"custom-small-table2"),loading:e.state["online_logs"].loading,rowKey:"id",dataSource:e.state.online_logs.data,columns:[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"created_at",width:"50%",render:function(e,t){return(0,C.ellipsis2)(e.slice(5),160)}},{title:"\u72b6\u6001",dataIndex:"status",render:function(e,t){var a="",l="";switch(Number(t.status)){case 1:a="green",l="\u4e0a\u7ebf";break;case-1:a="red",l="\u4e0b\u7ebf";break}return x.default.createElement(i.default,{color:a,text:l})}}],pagination:!1,size:"small",scroll:{x:!0,y:e.state.tableY}}),x.default.createElement(D.default,{className:"history-pagination",searchCondition:{},meta:e.state["online_logs"].meta,handleSearch:e.fetchLog})))),"device"===l.key&&"devices_history"===t.key&&(n=x.default.createElement(T,{tab:l.name,key:l.key},x.default.createElement("div",null,x.default.createElement(c.default,{style:{color:"#fff"},className:"custom-small-table ".concat(0===e.state["device_0"].data.length&&"custom-small-table2"),loading:e.state["device_0"].loading,rowKey:"id",dataSource:e.state.device_0.data,columns:[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",width:160,render:function(e,t){return(0,C.ellipsis2)(e.slice(5),160)}},{title:"\u8fd0\u884c\u65f6\u95f4(\u79d2)",dataIndex:"uptime",width:150,render:function(e,t){return(0,C.ellipsis2)((0,C.timeStamp)(t.data.uptime),130)}},{title:"\u91cd\u7f6e\u539f\u56e0",dataIndex:"reset_reason",width:80,render:function(e,t){return(0,C.ellipsis2)(t.data.reset_reason,80)}},{title:x.default.createElement("span",null,"\u4f9b\u7535\u7535\u538b(V)",x.default.createElement(o.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"\u4f9b\u7535\u7535\u538b(V)",chartData:e.state.device_0.data,chartKey:"supply_voltage",chartModal:!0})}})),dataIndex:"supply_voltage",width:150,render:function(e,t){return(0,C.ellipsis2)((t.data.supply_voltage/1e3).toFixed(3),100)}},{title:x.default.createElement("span",null,"\u4fe1\u53f7\u8d28\u91cf(dbm)",x.default.createElement(o.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"\u4fe1\u53f7\u8d28\u91cf(dbm)",chartData:e.state.device_0.data,chartKey:"network_signal_quality",chartModal:!0})}})),dataIndex:"network_signal_quality",render:function(e,t){return(0,C.ellipsis2)(t.data.network_signal_quality,100)}}],pagination:!1,size:"small",scroll:{x:!0,y:e.state.tableY}}),x.default.createElement(D.default,{className:"history-pagination",searchCondition:{type:l.key,channel:0},meta:e.state["".concat(l.key,"_0")].meta,handleSearch:e.fetch})))),"sensor"===l.key&&"get_history"===t.key&&(n=[0,1,2,3].map(function(t,r){return Boolean(a.props.config_data.sensor[r].type)&&x.default.createElement(T,{tab:a.props.config_data.sensor[r].alias,key:l.key+r},x.default.createElement("div",{key:r},x.default.createElement(c.default,{style:{color:"#fff"},className:"custom-small-table ".concat(0===e.state["sensor_".concat(r)].data.length&&"custom-small-table2"),loading:e.state["".concat(l.key,"_").concat(r)].loading,rowKey:"id",dataSource:e.state["sensor_".concat(r)].data,columns:[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",width:150,render:function(e,t){return(0,C.ellipsis2)(e.slice(5),150)}},{title:"\u72b6\u6001",dataIndex:"status",width:150,render:function(e,t){var a="",l="";switch(Number(t.data.status)){case 0:a="green",l="\u6b63\u5e38";break;case 1:a="purple",l="\u8fc7\u538b";break;case 2:a="orange",l="\u6b20\u538b";break;case 3:a="red",l="\u6545\u969c";break}return x.default.createElement(i.default,{color:a,text:l})}},{title:x.default.createElement("span",null,"\u538b\u529b(MPa)",x.default.createElement(o.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"\u538b\u529b(MPa)",chartData:e.state["sensor_".concat(r)].data,chartKey:"value",chartModal:!0})}})),dataIndex:"value",render:function(e,t){return(0,C.ellipsis2)(t.data.value,115)}}],pagination:!1,size:"small",scroll:{x:!0,y:e.state.tableY}}),x.default.createElement(D.default,{className:"history-pagination",searchCondition:{type:l.key,channel:r},meta:e.state["".concat(l.key,"_").concat(r)].meta,handleSearch:e.fetch})))})),"digital_input"===l.key&&"get_history"===t.key&&(n=[0,1].map(function(t,r){return Boolean(a.props.config_data.digital_input[r].type)&&x.default.createElement(T,{tab:a.props.config_data.digital_input[r].alias,key:l.key+r},x.default.createElement("div",{key:r},x.default.createElement(c.default,{style:{color:"#fff"},className:"custom-small-table ".concat(0===e.state["digital_input_".concat(r)].data.length&&"custom-small-table2"),loading:e.state["".concat(l.key,"_").concat(r)].loading,rowKey:"id",dataSource:e.state["digital_input_".concat(r)].data,columns:[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",width:150,render:function(e,t){return(0,C.ellipsis2)(e.slice(5),150)}},{title:"\u6c34\u6d41\u6307\u793a\u5668\u72b6\u6001",dataIndex:"level",width:150,render:function(e,t){return 1===Number(t.data.level)?x.default.createElement(i.default,{color:"#f50",text:"\u65e0\u6c34"}):x.default.createElement(i.default,{color:"#87d068",text:"\u6709\u6c34"})}},{title:"\u62a5\u8b66",dataIndex:"alarm",render:function(e,t){return Number(1===t.data.alarm)?x.default.createElement(i.default,{color:"#f50",text:"\u62a5\u8b66"}):x.default.createElement(i.default,{color:"#87d068",text:"\u4e0d\u62a5\u8b66"})}}],pagination:!1,size:"small",scroll:{x:!0,y:e.state.tableY-40}}),x.default.createElement(D.default,{className:"history-pagination",searchCondition:{type:l.key,channel:r},meta:e.state["".concat(l.key,"_").concat(r)].meta,handleSearch:e.fetch})))})),"ball_valve"===l.key&&"get_history"===t.key&&(n=[0,1].map(function(t,r){return Boolean(a.props.config_data.ball_valve[r]&&a.props.config_data.ball_valve[r].type)&&x.default.createElement(T,{tab:a.props.config_data.ball_valve_[r].alias,key:l.key+r},x.default.createElement("div",{key:r},x.default.createElement(c.default,{style:{color:"#fff"},className:"custom-small-table ".concat(0===e.state["ball_valve_".concat(r)].data.length&&"custom-small-table2"),loading:e.state["".concat(l.key,"_").concat(r)].loading,rowKey:"id",dataSource:e.state["ball_valve_".concat(r)].data,columns:[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",width:150,render:function(e,t){return(0,C.ellipsis2)(e.slice(5),150)}},{title:"\u72b6\u6001",dataIndex:"status",width:150,render:function(e,t){return 0===Number(t.data.status)?x.default.createElement(i.default,{color:"#f50",text:"\u5173"}):x.default.createElement(i.default,{color:"#87d068",text:"\u5f00"})}},{title:"\u4f4d\u7f6e",dataIndex:"position",render:function(e,t){var a="",l="";switch(Number(t.data.position)){case 0:l="\u5173",a="#f50";break;case 1:l="\u5f00",a="#87d068";break;case 2:l="\u79fb\u52a8\u4e2d",a="#108ee9";break;case 3:l="\u6545\u969c",a="yellow";break}return x.default.createElement(i.default,{color:a,text:l})}}],pagination:!1,size:"small",scroll:{x:!0,y:e.state.tableY-40}}),x.default.createElement(D.default,{className:"history-pagination",searchCondition:{type:l.key,channel:r},meta:e.state["".concat(l.key,"_").concat(r)].meta,handleSearch:e.fetch})))})),"modbus"===l.key&&"get_history"===t.key){var d=[],s=!0;n=[0,1,2,3].map(function(t,r){return"SCL-61D-GTE50"!==a.props.config_data.modbus[r].type&&"SCL-61D-LT50"!==a.props.config_data.modbus[r].type||(s=1100,d=[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",width:150,render:function(e,t){return(0,C.ellipsis2)(e.slice(5),150)}},{title:"\u72b6\u6001",dataIndex:"data_length",width:70,render:function(e,t){return Number(t.data.data_length)>0?x.default.createElement(i.default,{color:"#87d068",text:""}):x.default.createElement(i.default,{color:"#f50",text:""})}},{title:x.default.createElement("span",null,"\u77ac\u65f6\u6d41\u91cf(m\xb3/h)",x.default.createElement(o.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u77ac\u65f6\u6d41\u91cf(m\xb3/h)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"instantaneous_flow",chartModal:!0})}})),dataIndex:"instantaneous_flow",width:125,render:function(e,t){return(0,C.ellipsis2)(t.data.instantaneous_flow,120)}},{title:x.default.createElement("span",null,"\u6b63\u7d2f\u8ba1\u6d41\u91cf(m\xb3)",x.default.createElement(o.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u6b63\u7d2f\u8ba1\u6d41\u91cf(m\xb3)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"positive_cumulative_flow",chartModal:!0})}})),width:125,dataIndex:"positive_cumulative_flow",render:function(e,t){return(0,C.ellipsis2)(t.data.positive_cumulative_flow,120)}},{title:"\u6b63\u7d2f\u8ba1\u8fd0\u884c\u65f6\u95f4(\u5c0f\u65f6)",dataIndex:"positive_running_time",width:140,render:function(e,t){return(0,C.ellipsis2)(t.data.positive_running_time,140)}},{title:x.default.createElement("span",null,"\u8d1f\u7d2f\u8ba1\u6d41\u91cf(m\xb3)",x.default.createElement(o.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u8d1f\u7d2f\u8ba1\u6d41\u91cf(m\xb3)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"reverse_cumulative_flow",chartModal:!0})}})),dataIndex:"reverse_cumulative_flow",width:125,render:function(e,t){return(0,C.ellipsis2)(t.data.reverse_cumulative_flow,120)}},{title:"\u8d1f\u7d2f\u8ba1\u8fd0\u884c\u65f6\u95f4(\u5c0f\u65f6)",dataIndex:"reverse_running_time",width:140,render:function(e,t){return(0,C.ellipsis2)(t.data.reverse_running_time,140)}},{title:x.default.createElement("span",null,"\u538b\u529b(MPa)",x.default.createElement(o.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u538b\u529b(MPa)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"pressure_value",chartModal:!0})}})),dataIndex:"pressure_value",width:95,render:function(e,t){return(0,C.ellipsis2)(t.data.pressure_value,95)}},{title:"\u8bca\u65ad\u4fe1\u606f\u4ee3\u7801",dataIndex:"code",render:function(e,t){return(0,C.ellipsis2)(t.data.code,100)}}]),"SCL-61D-LT50"===a.props.config_data.modbus[r].type&&(s=1100),"PLC"===a.props.config_data.modbus[r].type&&(s=!0,d=[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",width:150,render:function(e,t){return(0,C.ellipsis2)(e.slice(5),150)}},{title:x.default.createElement("span",null,"\u538b\u529b\u9650\u5b9a\u503c(MPa)",x.default.createElement(o.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u538b\u529b\u9650\u5b9a\u503c(MPa)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"pressure_limit_value",chartModal:!0})}})),width:150,dataIndex:"pressure_limit_value",render:function(e,t){return(0,C.ellipsis2)(t.data.pressure_limit_value,100)}},{title:x.default.createElement("span",null,"\u9600\u540e\u538b\u529b(MPa)",x.default.createElement(o.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u9600\u540e\u538b\u529b(MPa)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"downstream_pressure_value",chartModal:!0})}})),width:150,dataIndex:"downstream_pressure_value",render:function(e,t){return(0,C.ellipsis2)(t.data.downstream_pressure_value,100)}},{title:"\u4e0a\u8154\u7403\u9600\u72b6\u6001",dataIndex:"up_valve_status",width:150,render:function(e,t){return Number(t.data.up_valve_status)>0?x.default.createElement(i.default,{color:"#87d068",text:"\u5f00"}):x.default.createElement(i.default,{color:"#f50",text:"\u5173"})}},{title:"\u4e0b\u8154\u7403\u9600\u72b6\u6001",dataIndex:"down_valve_status",width:150,render:function(e,t){return Number(t.data.down_valve_status)>0?x.default.createElement(i.default,{color:"#87d068",text:"\u5f00"}):x.default.createElement(i.default,{color:"#f50",text:"\u5173"})}},{title:"\u72b6\u6001",dataIndex:"data_length",render:function(e,t){return Number(t.data.data_length)>0?x.default.createElement(i.default,{color:"#87d068",text:"\u6b63\u5e38"}):x.default.createElement(i.default,{color:"#f50",text:"\u9519\u62a5"})}}]),"PCM380L"===a.props.config_data.modbus[r].type&&(d=[{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",width:120,render:function(e,t){return(0,C.ellipsis2)(e.slice(5),120)}},{title:x.default.createElement("span",null,"\u538b\u529b(MPa)",x.default.createElement(o.default,{type:"area-chart",className:"title-icon",onClick:function(){e.setState({title:"Modbus-".concat(r+1," \u538b\u529b(MPa)"),chartData:e.state["modbus_".concat(r)].data,chartKey:"pressure_value",chartModal:!0})}})),dataIndex:"pressure_value",render:function(e,t){return(0,C.ellipsis2)(t.data.pressure_value,100)}},{title:"\u72b6\u6001",dataIndex:"data_length",render:function(e,t){return Number(t.data.data_length)>0?x.default.createElement(i.default,{color:"#87d068",text:"\u6b63\u5e38"}):x.default.createElement(i.default,{color:"#f50",text:"\u9519\u62a5"})}}]),Boolean(a.props.config_data.modbus[r].type)&&x.default.createElement(T,{tab:a.props.config_data.modbus[r].alias,key:l.key+r},x.default.createElement("div",null,x.default.createElement(c.default,{style:{color:"#fff"},className:"custom-small-table ".concat(0===e.state["modbus_".concat(r)].data.length&&"custom-small-table2"),loading:e.state["".concat(l.key,"_").concat(r)].loading,rowKey:"id",dataSource:e.state["modbus_".concat(r)].data,columns:d,pagination:!1,size:"small",scroll:{x:s,y:e.state.tableY}}),x.default.createElement(D.default,{className:"history-pagination",searchCondition:{type:l.key,channel:r},meta:e.state["".concat(l.key,"_").concat(r)].meta,handleSearch:e.fetch})))})}return n})))})))),x.default.createElement(n.default,{title:!1,destroyOnClose:!0,visible:this.state.chartModal,closable:!1,footer:!1,centered:!0,width:"900px",onCancel:function(){e.setState({chartModal:!1,chartData:[],chartKey:""})}},x.default.createElement(L.default,{chartData:this.state.chartData,chartKey:this.state.chartKey,title:this.state.title})))}}]),a}(x.PureComponent),S=E))||S)||S),H=W;t.default=H},c6aW:function(e,t,a){"use strict";var l=a("fbTi"),r=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("43Yg")),o=r(a("/tCh")),c=r(a("scpF")),i=r(a("O/V9")),d=r(a("8aBX"));a("5KzM");var s=r(a("FCwu")),u=l(a("ZZRV")),f=a("LneV"),m=(r(a("t3Un")),r(a("KWUs")),r(a("EV5j")),r(a("BoxD")));function p(e){return function(){var t,a=(0,i.default)(e);if(h()){var l=(0,i.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,c.default)(this,t)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}s.default.Item;var _=function(e){(0,d.default)(a,e);var t=p(a);function a(e){var l;return(0,n.default)(this,a),l=t.call(this,e),l.dynamic=function(e,t){console.log("this.props.data",l.props.chartData);var a=JSON.parse(JSON.stringify(l.props.chartData));a.reverse(),l.echarts.registerTheme("chalk",m.default);for(var r=[],n=[],o=0;o<a.length;o++)a[o].data[l.props.chartKey]&&(r.push(a[o].collected_at),"supply_voltage"===l.props.chartKey?n.push(a[o].data[l.props.chartKey]/1e3):n.push(a[o].data[l.props.chartKey]));var c={backgroundColor:"rgba(128, 128, 128, 0)",tooltip:{trigger:"axis"},grid:{left:"4%",right:"4%",bottom:"11%",top:"5%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:r}],yAxis:[{type:"value",axisTick:{show:!1}}],dataZoom:[{type:"slider",show:!0,xAxisIndex:[0]},{type:"inside",xAxisIndex:[0]}],series:[{type:"line",smooth:!0,lineStyle:{normal:{width:2}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(255, 0,0, 0.7)"},{offset:.8,color:"rgba(255, 0,0, 0)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}},itemStyle:{normal:{color:"rgb(255, 0,0)"}},data:n}]};l.MyEcharts=l.echarts.init(document.querySelector("#echart"),"chalk"),l.MyEcharts.setOption(c,t)},l.echarts=window.echarts,l.BMap=window.BMap,l.marker=null,l.tleft=0,l.ttop=0,l.state={},l}return(0,o.default)(a,[{key:"componentDidMount",value:function(){this.dynamic()}},{key:"render",value:function(){this.props.form.getFieldDecorator;return u.default.createElement("div",{className:"ThreeModal-wrap site-data",style:{margin:"-24px",paddingBottom:"24px"}},u.default.createElement("h2",null,this.props.title," "),u.default.createElement("div",{id:"echart",style:{width:"100%",height:"400px"}}))}}]),a}(u.Component),y=s.default.create()(_),g=(0,f.connect)()(y);t.default=g},"oY/l":function(e,t,a){var l=a("jPiN");function r(e,t){var a=[];return l(e,function(e,l,r){t(e,l,r)&&a.push(e)}),a}e.exports=r}}]);